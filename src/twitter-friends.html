<link rel="import" href="../bower_components/polymer/polymer-element.html">

<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<dom-module id="twitter-friends">
<template>
<style>
	:host {
	@apply --layout-vertical; 
	@apply --layout-end;	
	}
</style>
<div>
	Friends 1
</div>
<div class="flex"></div>   
<div>
	Friends 2
</div>
</template>
<script>
    class TwitterFriends extends Polymer.Element {
        static get is() {
            return 'twitter-friends';
        }
        static get properties() {
            return {
         	 tweet: {
         		 type: Object
         	 }
          }
        }
        ready() {
            super.ready();
             var scout = ''
             if ( this.tweet.ts_scout ) {
            	 scout = '/' + this.tweet.ts_scout 
             }
			 var league_service = this.tweet.league + '.' + this.tweet.site;
			 if (JSON.parse(localStorage.getItem('environment')).title == dev.title) {
				 var league_service = 'dev.' + nativeDomain;
			 }
             var friends_url = 'http://' + league_service + '/friends/' + this.tweet.league + '/' + this.tweet.twitter + scout;
             console.log('friends url:', friends_url)
			 fetch(friends_url).then((resp) => resp.json()).catch(function(error) {
				console.log('There has been a problem with your fetch operation: ' + error.message);
			 }).then(function(scout_data) {
				if ( scout_data ) {
					 console.log('scout data:', scout_data)		
				}
			})            
        }
    }
    customElements.define(TwitterFriends.is, TwitterFriends);
</script>
</dom-module>